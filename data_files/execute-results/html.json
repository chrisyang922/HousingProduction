{
  "hash": "071443a9f0f5aa2cdc17558f06fcc34c",
  "result": {
    "engine": "knitr",
    "markdown": "# Data\n\n## Description\n\nThe project aims to analyze affordable housing units in NYC. The dataset originates from The Department of Housing Preservation and Development (HPD), a department of the government of NYC dedicated to ensuring quality and affordable housing while sustaining neighborhood strength and diversity.\n\nThe dataset can be easily accessed by downloading the CSV file from https://data.cityofnewyork.us/Housing-Development/Affordable-Housing-Production-by-Building/hg8x-zxpr/about_data, which can be directed via the NYC Housing Preservation & Development government website (https://www.nyc.gov/site/hpd/about/open-data.page). \n\nThe dataset was compiled by HPD using various methods, including wage information for housing development projects as mandated by Local Law 44, registration details from owners of residential rental properties, and survey data from housing units across the city. It consists of 41 columns and 7,637 rows, with each row representing details of a housing development or preservation project. According to the HPD, the dataset was first made publicly available on December 20, 2016, and undergoes updates quarterly. The most recent update occurred on September 23, 2024. \n\nOne notable issue with the dataset is the possible redundancy of buildings, as a single building may appear more than once if it was involved in multiple projects. This implies the need for data transformation during the cleaning process to address these duplicates.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\ndata <- read.csv(\"/Users/chaerinnoh/Desktop/Housing.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Project.ID\"                         \"Project.Name\"                      \n [3] \"Project.Start.Date\"                 \"Project.Completion.Date\"           \n [5] \"Building.ID\"                        \"Number\"                            \n [7] \"Street\"                             \"Borough\"                           \n [9] \"Postcode\"                           \"BBL\"                               \n[11] \"BIN\"                                \"Community.Board\"                   \n[13] \"Council.District\"                   \"Census.Tract\"                      \n[15] \"NTA...Neighborhood.Tabulation.Area\" \"Latitude\"                          \n[17] \"Longitude\"                          \"Latitude..Internal.\"               \n[19] \"Longitude..Internal.\"               \"Building.Completion.Date\"          \n[21] \"Reporting.Construction.Type\"        \"Extended.Affordability.Only\"       \n[23] \"Prevailing.Wage.Status\"             \"Extremely.Low.Income.Units\"        \n[25] \"Very.Low.Income.Units\"              \"Low.Income.Units\"                  \n[27] \"Moderate.Income.Units\"              \"Middle.Income.Units\"               \n[29] \"Other.Income.Units\"                 \"Studio.Units\"                      \n[31] \"X1.BR.Units\"                        \"X2.BR.Units\"                       \n[33] \"X3.BR.Units\"                        \"X4.BR.Units\"                       \n[35] \"X5.BR.Units\"                        \"X6.BR..Units\"                      \n[37] \"Unknown.BR.Units\"                   \"Counted.Rental.Units\"              \n[39] \"Counted.Homeownership.Units\"        \"All.Counted.Units\"                 \n[41] \"Total.Units\"                       \n```\n\n\n:::\n:::\n\n\n\nData Explanation \n\nThis project does not require every column from the dataset, as its focus is on analyzing affordable housing units in NYC. Outlined below are the selected columns from the dataset that may be utilized for the project.\n\n1. Borough: borough where the building is located.\n\n2. Community Board: the New York City Community District where the building is located.\n\n3. Latitude: location of the property on the earth’s surface. \n\n4. Longitude: location of the property on the earth’s surface. \n\n5. Reporting.Construction.Type: indicates whether the building is categorized as ‘new construction’ or ‘preservation’ in Housing New York statistics.\n\n6. Prevailing.Wage.Status: indicates whether the project is subject to prevailing wage requirements\n\n7. Extremely Low Income Units: units with rents that are affordable to households earning 0 to 30% of the area median income \n\n8. Very Low Income Units: units with rents that are affordable to households earning 31 to 50% of the area median income\n\n9. Low Income Units: units with rents that are affordable to households earning 51 to 80% of the area median income\n\n10. Moderate Income Units: units with rents that are affordable to households earning 81 to 120% of the area median income\n\n11. Middle Income Units: units with rents that are affordable to households earning 121 to 165% of the area median income\n\n12. Other Income Units: units reserved for building superintendents\n\n13. Studio Units: units with 0-bedrooms.\n\n14. 1-BR Units: units with 1-bedroom.\n\n15. 2-BR Units: units with 2-bedrooms.\n\n16. 3-BR Units: units with 3-bedrooms.\n\n17. 4-BR Units: units with 4-bedrooms.\n\n18. 5-BR Units: units with 5-bedrooms.\n\n19. 6-BR+ Units: units with 6-bedrooms or more.\n\n20. Counted Rental Units: units in the building, counted toward the Housing New York plan, where assistance has been provided to landlords in exchange for a requirement for affordable units.\n\n21. Counted Homeownership Units: units in the building, counted toward the Housing New York Plan, where assistance has been provided directly to homeowners.\n\n22. All Counted Units: total number of affordable units, counted towards the Housing New York plan, that are in the building.\n\n23. Total Units: total number of units, affordable and market rate, in each building.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data |> \n  select(\"Project.Start.Date\", \"Project.Completion.Date\",\"Community.Board\", \"Latitude\", \"Longitude\",\n         \"Reporting.Construction.Type\",\n         \"Prevailing.Wage.Status\", \n         \"Extremely.Low.Income.Units\", \n         \"Very.Low.Income.Units\", \"Low.Income.Units\", \"Moderate.Income.Units\", \"Middle.Income.Units\",\n         \"Other.Income.Units\", \"Borough\", \n         \"Studio.Units\",\"X1.BR.Units\", \"X2.BR.Units\", \"X3.BR.Units\", \"X4.BR.Units\", \"X5.BR.Units\", \n         \"X6.BR..Units\", \"Counted.Rental.Units\", \"Counted.Homeownership.Units\", \"All.Counted.Units\",\"Total.Units\")\n```\n:::\n\n\n\n\n## Missing value analysis\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(mi)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: Matrix\n\nAttaching package: 'Matrix'\n\nThe following objects are masked from 'package:tidyr':\n\n    expand, pack, unpack\n\nLoading required package: stats4\nmi (Version 1.1, packaged: 2022-06-05 05:31:15 UTC; ben)\nmi  Copyright (C) 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015 Trustees of Columbia University\nThis program comes with ABSOLUTELY NO WARRANTY.\nThis is free software, and you are welcome to redistribute it\nunder the General Public License version 2 or later.\nExecute RShowDoc('COPYING') for details.\n\nAttaching package: 'mi'\n\nThe following object is masked from 'package:tidyr':\n\n    complete\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(Matrix)\nlibrary(redav)\nlibrary(ggplot2)\n```\n:::\n\n\n\nTo examine patterns in missing values, we begin by determining the count of NAs in each column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nNA_per_column <- colSums(is.na(data)) |> sort(decreasing = TRUE)\nNA_per_column\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                   Latitude                   Longitude \n                       1531                        1531 \n         Project.Start.Date     Project.Completion.Date \n                          0                           0 \n            Community.Board Reporting.Construction.Type \n                          0                           0 \n     Prevailing.Wage.Status  Extremely.Low.Income.Units \n                          0                           0 \n      Very.Low.Income.Units            Low.Income.Units \n                          0                           0 \n      Moderate.Income.Units         Middle.Income.Units \n                          0                           0 \n         Other.Income.Units                     Borough \n                          0                           0 \n               Studio.Units                 X1.BR.Units \n                          0                           0 \n                X2.BR.Units                 X3.BR.Units \n                          0                           0 \n                X4.BR.Units                 X5.BR.Units \n                          0                           0 \n               X6.BR..Units        Counted.Rental.Units \n                          0                           0 \nCounted.Homeownership.Units           All.Counted.Units \n                          0                           0 \n                Total.Units \n                          0 \n```\n\n\n:::\n:::\n\nThe Latitude and Longitude columns each have 1,531 missing values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- missing_data.frame(data)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in .local(.Object, ...): Project.Completion.Date : some observations\nchanging to NA\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNOTE: The following pairs of variables appear to have the same missingness pattern.\n Please verify whether they are in fact logically distinct variables.\n     [,1]       [,2]       \n[1,] \"Latitude\" \"Longitude\"\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in .local(.Object, ...): Counted.Rental.Units and All.Counted.Units have the same rank ordering.\n Please verify whether they are in fact distinct variables.\n```\n\n\n:::\n\n```{.r .cell-code}\nclass(x)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"missing_data.frame\"\nattr(,\"package\")\n[1] \"mi\"\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# x@patterns\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlevels(x@patterns)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"nothing\"                                     \n[2] \"Project.Completion.Date\"                     \n[3] \"Latitude, Longitude\"                         \n[4] \"Project.Completion.Date, Latitude, Longitude\"\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(x@patterns)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                     nothing \n                                        4527 \n                     Project.Completion.Date \n                                        1579 \n                         Latitude, Longitude \n                                        1477 \nProject.Completion.Date, Latitude, Longitude \n                                          54 \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nimage(x)\n```\n\n::: {.cell-output-display}\n![](data_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nTo uncover potential patterns among these NAs, we analyzed the data and plotted a heatmap of them by utilizing the \"mi\" package, which is particularly useful for datasets with a large number of rows.\n\nThe dark areas of the figure represent missing values. Our analysis revealed that these NA values originated from the same rows. Specifically, all 1,531 missing values in the Latitude column also corresponded to missing values in the Longitude columns. The cluster within specific observations suggests a possible pattern related to data collection issues or specific subsets in the dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_missing(data, max_cols = 5, percent = FALSE) \n```\n\n::: {.cell-output-display}\n![](data_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nAnother visualization reveals the same pattern of the NA values. Approximately 6,000 rows have complete data across the columns, while around 1,500 rows have missing values in the Longitude and Latitude columns. The visualization highlights that the NA values in these two columns consistently originate from the same rows.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nall_boroughs <- unique(data$Borough)\n\nNA_grouping <- data |>\n  group_by(Borough) |>\n  summarize(\n    num_rows = n(),\n    NA_num = sum(is.na(Latitude)),\n    NA_percent = (NA_num / num_rows) * 100\n  )\n\nggplot(NA_grouping, aes(x = Borough, y = NA_percent, fill = Borough)) +\n  geom_bar(stat = \"identity\") +\n  labs(\n    title = \"Percentage of NA Values in Latitude & Longitude Column by Borough\",\n    x = \"Borough\",\n    y = \"Percentage of NA Values\"\n  )\n```\n\n::: {.cell-output-display}\n![](data_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nTo determine whether missing values in the Latitude and Longitude columns are correlated with values of another variable, we analyzed the percentage of NA values by borough (Bronx, Brooklyn, Manhattan, Queens, and Staten Island). The results reveal that Staten Island marked the highest rate of NA values for both columns (approximately 87%) while Manhattan had the lowest proportion (approximately 4%). This analysis highlights a clear geographic trend in the missing data, with Staten Island and Queens emerging as the most problematic boroughs and Manhattan being the least affected.\n\n",
    "supporting": [
      "data_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}